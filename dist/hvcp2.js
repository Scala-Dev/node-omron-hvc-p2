!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";const n=t(1),o=t(2),a=(t(3),t(4)),i=t(5),s=function(){this._port=null,this._connected=!1,this._ondata=(()=>{}),this._request_timer=null,this._user_id_list=[],this._configurations={},this._DEFAULT_CONFIGURATIONS={cameraAngle:{angle:0},threshold:{body:500,hand:500,face:500,recognition:500},detectionSize:{bodyMin:30,bodyMax:8192,handMin:40,handMax:8192,faceMin:64,faceMax:8192},faceAngle:{yaw:0,roll:0}},this._MODEL_NAME="B5T-007001",this._serial_port_path="",this._model={}};s.prototype.version=function(){return"v0.1.5a"},s.prototype.connected=function(){return this._connected},s.prototype.connect=function(e){return new Promise((r,t)=>{if(e&&"object"!=typeof e)return void t(new Error("Invaid parameter."));let n="";if("path"in(e={})&&"string"!=typeof(n=e.path))return void t(new Error("The parameter `path` must be a string."));let o=921600;if("baudRate"in e){if("number"!=typeof(o=e.baudRate))return void t(new Error("The parameter `baudRate` must be a number."));if(!o.toString().match(/^9600|38400|115200|230400|460800|921600$/))return void t(new Error("The parameter `baudRate` must be 9600, 38400, 115200, 230400, 460800, or 921600."))}this._openSerialPort({path:n,baudRate:o}).then(()=>this.getConfigurations({cache:!1})).then(()=>this.getFaceRecognitionUsers({cache:!1})).then(()=>{r()}).catch(e=>{console.log(e),t(e)})})},s.prototype._openSerialPort=function(e){return new Promise((r,t)=>{!0!==this._connected?a.list().then(r=>{let t=[],n=o.platform();return e.path?r.forEach(e=>{e.comName===path&&t.push(e)}):"linux"===n?r.forEach(e=>{e.manufacturer&&e.manufacturer.match(/OMRON/,"i")&&e.vendorId&&e.vendorId.match(/0590/)&&e.productId&&e.productId.match(/(HVC\-P2|00ca)/,"i")&&t.push(e)}):"win32"===n?r.forEach(e=>{e.vendorId&&e.vendorId.match(/0590/)&&e.productId&&e.productId.match(/00CA/,"i")&&t.push(e)}):"darwin"===n&&r.forEach(e=>{e.comName.match(/usb/)&&e.manufacturer&&e.manufacturer.match(/OMRON/,"i")&&e.vendorId&&e.vendorId.match(/0590/)&&e.productId&&e.productId.match(/00ca/,"i")&&t.push(e)}),this._tryOpenSerialPort(e.baudRate,t)}).then(()=>{r()}).catch(e=>{console.log("186:"),console.log(e),t(e)}):r()})},s.prototype._tryOpenSerialPort=function(e,r){return new Promise((t,n)=>{let o=null,i=t=>{let n=r.shift();if(!n)return void t(o||new Error("No device was found."));let s=n.comName,u=new a(s,{baudRate:e});u.once("error",e=>{o=e,this._connected=!1,u=null,i(t)}),u.once("open",()=>{this._initSerialPort(u),this.request(0,null).then(e=>{e.model===this._MODEL_NAME?(this._model=JSON.parse(JSON.stringify(e)),t(null,s)):u.close(()=>{u=null,i(t)})}).catch(e=>{console.log("226:"),console.log(e),i(t)})})};i((e,r)=>{e?n(e):(this._serial_port_path=r,t())})})},s.prototype._initSerialPort=function(e){this._connected=!0,this._port=e,this._port.on("data",e=>{this._ondata(e)}),this._port.once("close",()=>{this._port.removeAllListeners("data"),this._connected=!1,this._port=null,this._serial_port_path=""})},s.prototype.disconnect=function(){return new Promise((e,r)=>{this._port&&!0===this._connected?this._port.close(()=>{e()}):e()})},s.prototype.getSerialPortPath=function(){return this._serial_port_path},s.prototype.request=function(e,r){return new Promise((t,n)=>{if(!0!==this._connected)return void n(new Error("The device is not connected."));if(this._request_timer)return void n(new Error("The previous process is running."));let o=i.create(e,r);if(o.error)return void n(o.error);let a=1e3;4===e?a=3e4:34===e?a=5e3:48===e&&(a=1e4),this._request_timer=setTimeout(()=>{this._request_timer=null,console.log("Took too long..."),n(new Error("Timeout"))},a);let s=0,u=0,f=[];this._ondata=(o=>{if(0===u){if(!(254===o.readUInt8(0)&&o.length>=6))return o=[],void n(new Error("Unknown data………"));s=o.readUInt32LE(2)}if(f.push(o),(u+=o.length)>=s){this._ondata=(()=>{}),clearTimeout(this._request_timer),this._request_timer=null;let a=Buffer.concat(f),s=i.parse(e,a,r);s.error?(f=[],o=[],n(s.error)):(f=[],o=[],t(s.data))}}),this._port.write(o.buffer)})},s.prototype.getModelVersion=function(e){return new Promise((r,t)=>{let n=!0;if(e&&"object"==typeof e&&"cache"in e){let r=e.cache;if("boolean"!=typeof r)return void t(new Error("The parameter `cache` must be Boolean."));n=r}if(!0===n)return console.log("cached"),void r(JSON.parse(JSON.stringify(this._model)));this.request(0,null).then(e=>{r(e)}).catch(e=>{console.log("372:"),console.log(e),t(e)})})},s.prototype.detect=function(e){return new Promise((r,t)=>{this.request(4,e).then(e=>{r(e)}).catch(e=>{console.log("436:"),console.log(e),t(e)})})},s.prototype.getConfigurations=function(e){return new Promise((r,t)=>{let n=!0;if(e&&"object"==typeof e&&"cache"in e){let r=e.cache;if("boolean"!=typeof r)return void t(new Error("The parameter `cache` must be Boolean."));n=r}if(!0===n){let e=JSON.parse(JSON.stringify(this._configurations));return void r(e)}let o={};this.request(2).then(e=>(o.cameraAngle=e,this.request(6))).then(e=>(o.threshold=e,this.request(8))).then(e=>(o.detectionSize=e,this.request(10))).then(e=>{o.faceAngle=e,this._configurations=o;let t=JSON.parse(JSON.stringify(o));r(t)}).catch(e=>{console.log("486:"),console.log(e),t(e)})})},s.prototype.setConfigurations=function(e){return new Promise((r,t)=>{if(!e||"object"!=typeof e)return void t(new Error("The argument `configurations` is invalid."));let n={};this.getConfigurations().then(r=>{if(["cameraAngle","threshold","detectionSize","faceAngle"].forEach(r=>{if(r in e&&"object"==typeof e[r]){let o=0,a={};for(var t in this._configurations[r])t in e[r]?(a[t]=e[r][t],o++):a[t]=this._configurations[r][t];o>0&&(n[r]=a)}}),0!==Object.keys(n).length)return this._setConfigurationsRequest(1,n.cameraAngle);t(new Error("No configuraion value is specified in the parameters."))}).then(()=>this._setConfigurationsRequest(5,n.threshold)).then(()=>this._setConfigurationsRequest(7,n.detectionSize)).then(()=>this._setConfigurationsRequest(9,n.faceAngle)).then(()=>this.getConfigurations({cache:!1})).then(e=>{r(e)}).catch(e=>{console.log("561:"),console.log(e),t(e)})})},s.prototype._setConfigurationsRequest=function(e,r){return new Promise((t,n)=>{r&&"object"==typeof r?this.request(e,r).then(e=>{t()}).catch(e=>{console.log("578:"),console.log(e),n(e)}):t()})},s.prototype.resetConfigurations=function(){return new Promise((e,r)=>{this._setConfigurationsRequest(1,this._DEFAULT_CONFIGURATIONS.cameraAngle).then(()=>this._setConfigurationsRequest(5,this._DEFAULT_CONFIGURATIONS.threshold)).then(()=>this._setConfigurationsRequest(7,this._DEFAULT_CONFIGURATIONS.detectionSize)).then(()=>this._setConfigurationsRequest(9,this._DEFAULT_CONFIGURATIONS.faceAngle)).then(()=>this.getConfigurations({cache:!1})).then(r=>{e(r)}).catch(e=>{console.log("607:"),console.log(e),r(e)})})},s.prototype.saveAlbum=function(e){return new Promise((r,t)=>{let o="";if(e){if("object"!=typeof e)return void t(new Error("The argument `params` is invalid."));if("path"in e){let r=e.path;if("string"!=typeof r||""===r)return void t(new Error("The parameter `path` must be a string representing a file path."));o=r}}this.request(32,null).then(e=>{let a=e.album;o?n.open(o,"w",(o,i)=>{o?t(o):n.write(i,a,0,a.length,null,o=>{o?t(o):n.close(i,()=>{r(e)})})}):r(e)}).catch(e=>{console.log("660:"),console.log(e),t(e)})})},s.prototype.loadAlbum=function(e){return new Promise((r,t)=>{let o=null,a="";if(e)if("object"==typeof e){if("buffer"in e){let r=e.buffer;if(!Buffer.isBuffer(r))return void t(new Error("The parameter `buffer` must be a Buffer object."));o=r}if(!o&&"path"in e){let r=e.path;if("string"!=typeof r||""===r)return void t(new Error("The parameter `path` must be a string representing a file path."));a=r}a?n.readFile(a,(e,n)=>{e?t(e):this.request(33,{album:n}).then(()=>{r()}).catch(e=>{console.log("715:"),console.log(e),t(e)})}):this.request(33,{album:o}).then(()=>{r()}).catch(e=>{console.log("723:"),console.log(e),t(e)})}else t(new Error("The argument `params` is invalid."));else t(new Error("The argument `params` is required."))})},s.prototype.saveAlbumOnFlashROM=function(){return new Promise((e,r)=>{this.request(34,null).then(()=>{e()}).catch(e=>{console.log("741:"),console.log(e),r(e)})})},s.prototype.reformatFlashROM=function(){return new Promise((e,r)=>{this.request(48,null).then(()=>{e()}).catch(e=>{console.log("757:"),console.log(e),r(e)})})},s.prototype.addFaceRecognitionData=function(e){return new Promise((r,t)=>{e&&"object"==typeof e?this.request(16,{userId:e.userId,dataId:e.dataId}).then(e=>{r(e)}).catch(e=>{console.log("815:"),console.log(e),t(e)}):t(new Error("The argument `params` is invalid."))})},s.prototype.deleteFaceRecognitionData=function(e){return new Promise((r,t)=>{e&&"object"==typeof e?"userId"in e?-1!==this._user_id_list.indexOf(e.userId)?this.request(21,e).then(n=>{n.dataIdList.indexOf(e.dataId)>=0?this.request(17,e).then(()=>{if(1===n.dataIdList.length){let r=[];this._user_id_list.forEach(t=>{t!==e.userId&&r.push(t)}),this._user_id_list=r}r()}).catch(e=>{console.log("857:"),console.log(e),t(e)}):t(new Error("The specified `dataId` is not registered for the specified `userId`."))}).catch(e=>{console.log("865:"),console.log(e),t(e)}):t(new Error("The specified `userId` is not registered.")):t(new Error("The parameter `userId` is required.")):t(new Error("The argument `params` is invalid."))})},s.prototype.deleteFaceRecognitionUser=function(e){return new Promise((r,t)=>{e&&"object"==typeof e?"userId"in e?-1!==this._user_id_list.indexOf(e.userId)?this.request(18,e).then(()=>{r()}).catch(e=>{console.log("895:"),console.log(e),t(e)}):t(new Error("The specified `userId` is not registered.")):t(new Error("The parameter `userId` is required.")):t(new Error("The argument `params` is invalid."))})},s.prototype.clearFaceRecognitionData=function(){return new Promise((e,r)=>{this.request(19,null).then(()=>{e()}).catch(e=>{console.log("911:"),console.log(e),r(e)})})},s.prototype.getFaceRecognitionData=function(e){return new Promise((r,t)=>{e&&"object"==typeof e?"userId"in e?-1!==this._user_id_list.indexOf(e.userId)?this.request(21,e).then(e=>{r(e)}).catch(e=>{console.log("941:"),console.log(e),t(e)}):t(new Error("The specified `userId` is not registered.")):t(new Error("The parameter `userId` is required.")):t(new Error("The argument `params` is invalid."))})},s.prototype.getFaceRecognitionUsers=function(e){return new Promise((r,t)=>{let n=!0;if(e&&"object"==typeof e&&"cache"in e){let r=e.cache;if("boolean"!=typeof r)return void t(new Error("The parameter `cache` must be Boolean."));n=r}if(!0===n)return void r({userIdList:this._user_id_list});let o=[],a=0,i=e=>{this.request(21,{userId:a}).then(r=>{r.dataIdList.length>0&&o.push(a),++a>99?e():i(e)}).catch(e=>{console.log("989:"),console.log(e),t(e)})};i(()=>{this._user_id_list=o,r({userIdList:JSON.parse(JSON.stringify(o))})})})},e.exports=s},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("os")},function(e,r){e.exports=require("path")},function(e,r){e.exports=require("serialport")},function(e,r,t){"use strict";const n=function(){};n.prototype.parse=function(e,r,t){if(!r||r.length<6||254!==r.readUInt8(0))return console.log(r),{error:new Error("Unexpected data was received. (1)")};let n=r.readInt32LE(2);r.length!==n+6&&console.log(r);let o=r.readUInt8(1);if(o>0){let e=this._getResponseCodeMessage(o)+" (0x"+r.slice(1,2).toString("hex")+")";return{error:new Error(e)}}let a=r.slice(6),i=null;if(0===e)i=this._parse00(a);else if(1===e)i=this._parse01(a);else if(2===e)i=this._parse02(a);else if(4===e)i=this._parse04(a,t);else if(5===e)i=this._parse05(a);else if(6===e)i=this._parse06(a);else if(7===e)i=this._parse07(a);else if(8===e)i=this._parse08(a);else if(9===e)i=this._parse09(a);else if(10===e)i=this._parse0A(a);else if(16===e)i=this._parse10(a);else if(17===e)i=this._parse11(a);else if(18===e)i=this._parse12(a);else if(19===e)i=this._parse13(a);else if(21===e)i=this._parse15(a);else if(32===e)i=this._parse20(a);else if(33===e)i=this._parse21(a);else if(34===e)i=this._parse22(a);else{if(48!==e)return{error:new Error("Unknown command number: 0x"+Buffer.from([e]).toString("hex"))};i=this._parse30(a)}return i.data?{data:i.data}:i.error?{error:i.error}:{error:new Error("Failed to parse the received data.")}},n.prototype.create=function(e,r){return 0==e?this._create00(r):1===e?this._create01(r):2===e?this._create02(r):4===e?this._create04(r):5===e?this._create05(r):6===e?this._create06(r):7===e?this._create07(r):8===e?this._create08(r):9===e?this._create09(r):10===e?this._create0A(r):16===e?this._create10(r):17===e?this._create11(r):18===e?this._create12(r):19===e?this._create13(r):21===e?this._create15(r):32===e?this._create20(r):33===e?this._create21(r):34===e?this._create22(r):48===e?this._create30(r):{error:new Error("Unknown command number.")}},n.prototype._getResponseCodeMessage=function(e){return 0===e?"Normal end":1===e?"Number of faces that can be registered is 0 (for Registration command only)":2===e?"Number of detected faces is 2 or more (for Registration command only)":255===e?"Undefined error (this happens when an unlisted command is received)":254===e?"Internal error":253===e?"Improper command":e>=250&&e<=252?"Transmission error":e>=240&&e<=240?"Device error":e>=192&&e<=223?"Face Recognition data error":"Unknown error"},n.prototype._parse00=function(e){return 19===e.length?{data:{model:e.slice(0,12).toString("ascii").replace(/\s*$/,""),major:e.readUInt8(12),minor:e.readUInt8(13),release:e.readUInt8(14),revision:e.readUInt32LE(15)}}:{error:new Error("Parse error: The data is not for the command number `0x00`.")}},n.prototype._create00=function(){return{buffer:Buffer.from([254,0,0,0])}},n.prototype._parse01=function(e){return{data:{}}},n.prototype._create01=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};if(!("angle"in e))return{error:new Error("The parameter `angle` is required.")};let r=e.angle;return"number"==typeof r&&r.toString().match(/^(0|1|2|3)$/)?{buffer:Buffer.from([254,1,1,0,r])}:{error:new Error("The parameter `angle` must be 0, 1, 2, or 3.")}},n.prototype._parse02=function(e){return 1===e.length?{data:{angle:e.readUInt8(0)}}:{error:new Error("Parse error: The data is not for the command number `0x02`.")}},n.prototype._create02=function(){return{buffer:Buffer.from([254,2,0,0])}},n.prototype._parse04=function(e,r){if(e.length<4)return{error:new Error("The length of the response data is too short for the command `0x04`.")};let t=e.readUInt8(0),n=e.readUInt8(1),o=e.readUInt8(2),a=4+8*t+8*n;if(o){let e=0;r.face&&(e+=8),r.direction&&(e+=8),r.age&&(e+=3),r.gender&&(e+=3),r.gaze&&(e+=2),r.blink&&(e+=4),r.expression&&(e+=6),r.recognition&&(e+=4),a+=e*o}if(1===r.image?a+=76804:2===r.image&&(a+=19204),e.length!==a)return console.log("IMAGE BUFFER ERROR - UNEXPECTED LENGTH - let it parse anyway…"),{data:{}};let i={},s=4,u=[];for(let r=0;r<t;r++)u.push({x:e.readInt16LE(s+0),y:e.readInt16LE(s+2),size:e.readInt16LE(s+4),confidence:e.readInt16LE(s+6)}),s+=8;r.body&&(i.body=u);let f=[];for(let r=0;r<n;r++)f.push({x:e.readInt16LE(s+0),y:e.readInt16LE(s+2),size:e.readInt16LE(s+4),confidence:e.readInt16LE(s+6)}),s+=8;r.hand&&(i.hand=f);let c=[];for(let t=0;t<o;t++){let t={};r.face&&(t.face={x:e.readInt16LE(s+0),y:e.readInt16LE(s+2),size:e.readInt16LE(s+4),confidence:e.readInt16LE(s+6)},s+=8),r.direction&&(t.direction={yaw:e.readInt16LE(s+0),pitch:e.readInt16LE(s+2),roll:e.readInt16LE(s+4),confidence:e.readInt16LE(s+6)},s+=8),r.age&&(t.age={age:e.readInt8(s+0),confidence:e.readInt16LE(s+1)},s+=3),r.gender&&(t.gender={gender:e.readInt8(s+0),confidence:e.readInt16LE(s+1)},s+=3),r.gaze&&(t.gaze={yaw:e.readInt8(s+0),pitch:e.readInt8(s+1)},s+=2),r.blink&&(t.blink={left:e.readInt16LE(s+0),right:e.readInt16LE(s+2)},s+=4),r.expression&&(t.expression={neutral:e.readInt8(s+0),happiness:e.readInt8(s+1),surprise:e.readInt8(s+2),anger:e.readInt8(s+3),sadness:e.readInt8(s+4),positive:e.readInt8(s+5)},s+=6),r.recognition&&(t.recognition={userId:e.readInt16LE(s+0),score:e.readInt16LE(s+2)},s+=4),c.push(t)}if((r.face||r.direction||r.age||r.gender||r.gaze||r.blink||r.expression||r.recognition)&&(i.face=c),r.image){let r=e.readUInt16LE(s+0),t=e.readUInt16LE(s+2),n=e.slice(s+4),o=[];for(let e=0;e<n.length;e++)o.push(n.readUInt8(e));i.image={width:r,height:t,pixels:o,buffer:n},o=null,n=null}return{data:i}},n.prototype._create04=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r=null,t={};if(["body","hand","face","direction","age","gender","gaze","blink","expression","recognition"].forEach(n=>{if(n in e){let o=e[n];"number"==typeof o&&o.toString().match(/^(0|1)$/)?t[n]=o:r=new Error("The parameter `"+n+"` must be 0 or 1.")}else t[n]=0}),r)return{error:r};if("image"in e){let n=e.image;"number"==typeof n&&n.toString().match(/^(0|1|2)$/)?t.image=n:r=new Error("The parameter `"+k+"` must be 0, 1, or 2.")}else t.image=0;let n=0;["body","hand","face","direction","age","gender","gaze","blink"].forEach((e,r)=>{1===t[e]&&(n|=1<<r)});let o=0;["expression","recognition"].forEach((e,r)=>{1===t[e]&&(o|=1<<r)});let a=t.image;return{buffer:Buffer.from([254,4,3,0,n,o,a])}},n.prototype._parse05=function(e){return{data:{}}},n.prototype._create05=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r=null,t={};if(["body","hand","face","recognition"].forEach(n=>{if(n in e){let o=e[n],a="recognition"===n?0:1;"number"==typeof o&&o>=a&&o<=1e3&&o%1==0?t[n]=o:r=new Error("The parameter `"+n+"` must be an integer between "+a+" and 1000.")}else t[n]=500}),r)return{error:r};let n=Buffer.from([254,5,8,0]),o=Buffer.alloc(8);return["body","hand","face","recognition"].forEach((e,r)=>{o.writeUInt16LE(t[e],2*r)}),{buffer:Buffer.concat([n,o])}},n.prototype._parse06=function(e){return 8===e.length?{data:{body:e.readUInt16LE(0),hand:e.readUInt16LE(2),face:e.readUInt16LE(4),recognition:e.readUInt16LE(6)}}:{error:new Error("Parse error: The data is not for the command number `0x06`.")}},n.prototype._create06=function(){return{buffer:Buffer.from([254,6,0,0])}},n.prototype._parse07=function(e){return{data:{}}},n.prototype._create07=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r=null,t={},n={bodyMin:30,bodyMax:8192,handMin:40,handMax:8192,faceMin:64,faceMax:8192};if(["bodyMin","bodyMax","handMin","handMax","faceMin","faceMax"].forEach(o=>{if(o in e){let n=e[o];"number"==typeof n&&n>=20&&n<=8192&&n%1==0?t[o]=n:r=new Error("The parameter `"+o+"` must be an integer between 20 and 8192.")}else t[o]=n[o]}),r)return{error:r};if(["body","hand","face"].forEach(e=>{t[e+"Min"]>t[e+"Max"]&&(r=new Error("The `"+e+"Min` must be less than or equal to the `"+e+"Max`."))}),r)return{error:r};let o=Buffer.from([254,7,12,0]),a=Buffer.alloc(12);return["body","hand","face"].forEach((e,r)=>{a.writeUInt16LE(t[e+"Min"],4*r),a.writeUInt16LE(t[e+"Max"],4*r+2)}),{buffer:Buffer.concat([o,a])}},n.prototype._parse08=function(e){return 12===e.length?{data:{bodyMin:e.readUInt16LE(0),bodyMax:e.readUInt16LE(2),handMin:e.readUInt16LE(4),handMax:e.readUInt16LE(6),faceMin:e.readUInt16LE(8),faceMax:e.readUInt16LE(10)}}:{error:new Error("Parse error: The data is not for the command number `0x08`.")}},n.prototype._create08=function(){return{buffer:Buffer.from([254,8,0,0])}},n.prototype._parse09=function(e){return{data:{}}},n.prototype._create09=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r={};if("yaw"in e){let t=e.yaw;if("number"!=typeof t||!t.toString().match(/^(0|1|2)$/))return{error:new Error("The parameter `yaw` must be 0, 1, or 2.")};r.yaw=t}else r.yaw=0;if("roll"in e){let t=e.roll;if("number"!=typeof t||!t.toString().match(/^(0|1)$/))return{error:new Error("The parameter `roll` must be 0 or 1.")};r.roll=t}else r.roll=0;return{buffer:Buffer.from([254,9,2,0,r.yaw,r.roll])}},n.prototype._parse0A=function(e){return 2===e.length?{data:{yaw:e.readUInt8(0),roll:e.readUInt8(1)}}:{error:new Error("Parse error: The data is not for the command number `0x0A`.")}},n.prototype._create0A=function(){return{buffer:Buffer.from([254,10,0,0])}},n.prototype._parse10=function(e){if(4100===e.length){let r=e.readUInt16LE(0),t=e.readUInt16LE(2),n=[];for(let r=4;r<e.length;r++)n.push(e.readUInt8(r));return{data:{width:r,height:t,pixels:n}}}return{error:new Error("Parse error: The data is not for the command number `0x10`.")}},n.prototype._create10=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r={};if(!("userId"in e))return{error:new Error("The parameter `userId` is required")};{let t=e.userId;if(!("number"==typeof t&&t>=0&&t<=99&&t%1==0))return{error:new Error("The parameter `userId` must be an integer between 0 and 99.")};r.userId=t}if(!("dataId"in e))return{error:new Error("The parameter `dataId` is required")};{let t=e.dataId;if(!("number"==typeof t&&t>=0&&t<=9&&t%1==0))return{error:new Error("The parameter `dataId` must be an integer between 0 and 9.")};r.dataId=t}let t=Buffer.from([254,16,3,0]),n=Buffer.alloc(3);return n.writeUInt16LE(r.userId,0),n.writeUInt8(r.dataId,2),{buffer:Buffer.concat([t,n])}},n.prototype._parse11=function(e){return{data:{}}},n.prototype._create11=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r={};if(!("userId"in e))return{error:new Error("The parameter `userId` is required")};{let t=e.userId;if(!("number"==typeof t&&t>=0&&t<=99&&t%1==0))return{error:new Error("The parameter `userId` must be an integer between 0 and 99.")};r.userId=t}if(!("dataId"in e))return{error:new Error("The parameter `dataId` is required")};{let t=e.dataId;if(!("number"==typeof t&&t>=0&&t<=9&&t%1==0))return{error:new Error("The parameter `dataId` must be an integer between 0 and 9.")};r.dataId=t}let t=Buffer.from([254,17,3,0]),n=Buffer.alloc(3);return n.writeUInt16LE(r.userId,0),n.writeUInt8(r.dataId,2),{buffer:Buffer.concat([t,n])}},n.prototype._parse12=function(e){return{data:{}}},n.prototype._create12=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r={};if(!("userId"in e))return{error:new Error("The parameter `userId` is required")};{let t=e.userId;if(!("number"==typeof t&&t>=0&&t<=99&&t%1==0))return{error:new Error("The parameter `userId` must be an integer between 0 and 99.")};r.userId=t}let t=Buffer.from([254,18,2,0]),n=Buffer.alloc(2);return n.writeUInt16LE(r.userId,0),{buffer:Buffer.concat([t,n])}},n.prototype._parse13=function(e){return{data:{}}},n.prototype._create13=function(){return{buffer:Buffer.from([254,19,0,0])}},n.prototype._parse15=function(e){if(2===e.length){let r=[],t=e.readUInt8(0);for(let e=0;e<8;e++)t&1<<e&&r.push(e);let n=e.readUInt8(1);for(let e=0;e<8;e++)n&1<<e&&r.push(e+8);return{data:{dataIdList:r}}}return{error:new Error("Parse error: The data is not for the command number `0x15`.")}},n.prototype._create15=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r={};if(!("userId"in e))return{error:new Error("The parameter `userId` is required")};{let t=e.userId;if(!("number"==typeof t&&t>=0&&t<=99&&t%1==0))return{error:new Error("The parameter `userId` must be an integer between 0 and 99.")};r.userId=t}let t=Buffer.from([254,21,2,0]),n=Buffer.alloc(2);return n.writeUInt16LE(r.userId,0),{buffer:Buffer.concat([t,n])}},n.prototype._parse20=function(e){return e.length>=40&&e.length<=163420?{data:{album:e}}:{error:new Error("Parse error: The data is not for the command number `0x20`.")}},n.prototype._create20=function(){return{buffer:Buffer.from([254,32,0,0])}},n.prototype._parse21=function(e){return{data:{}}},n.prototype._create21=function(e){if(!e||"object"!=typeof e)return{error:new Error("Invalid parameter.")};let r={};if(!("album"in e))return{error:new Error("The parameter `album` is required")};{let t=e.album;if(!Buffer.isBuffer(t))return{error:new Error("The parameter `album` must be a `Buffer` object.")};r.album=t}let t=Buffer.from([254,33,4,0]),n=Buffer.alloc(4);return n.writeUInt32LE(r.album.length,0),{buffer:Buffer.concat([t,n,r.album])}},n.prototype._parse22=function(e){return{data:{}}},n.prototype._create22=function(){return{buffer:Buffer.from([254,34,0,0])}},n.prototype._parse30=function(e){return{data:{}}},n.prototype._create30=function(){return{buffer:Buffer.from([254,48,0,0])}},e.exports=new n}]);